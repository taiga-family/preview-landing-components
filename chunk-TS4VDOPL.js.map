{"version":3,"sources":["node_modules/@tinkoff/tui-editor/fesm2015/tinkoff-tui-editor-extensions-details.js"],"sourcesContent":["import { tuiGetSelectedContent, tuiDeleteNode } from '@tinkoff/tui-editor/utils';\nimport { Node, mergeAttributes } from '@tiptap/core';\nconst TuiDetails = Node.create({\n  name: `details`,\n  addOptions() {\n    return {\n      HTMLAttributes: {}\n    };\n  },\n  addAttributes() {\n    return {\n      opened: {\n        default: true,\n        keepOnSplit: false,\n        parseHTML: element => element.getAttribute(`data-opened`) === `true`,\n        renderHTML: attributes => ({\n          'data-opened': attributes.opened\n        })\n      }\n    };\n  },\n  content: `summary detailsContent`,\n  group: `block`,\n  allowGapCursor: true,\n  isolating: true,\n  parseHTML() {\n    return [{\n      tag: `details`\n    }];\n  },\n  renderHTML({\n    HTMLAttributes\n  }) {\n    return [`div`, {\n      class: `t-details-wrapper t-details-wrapper_rendered`\n    }, [`details`, mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0], [`button`, {\n      class: `t-details-arrow`\n    }]];\n  },\n  addNodeView() {\n    return ({\n      node\n    }) => {\n      const wrapper = document.createElement(`div`);\n      const details = document.createElement(`details`);\n      const button = document.createElement(`button`);\n      wrapper.className = `t-details-wrapper`;\n      button.className = `t-details-arrow`;\n      details.open = node.attrs.opened;\n      button.addEventListener(`click`, () => {\n        details.open = !details.open;\n        node.attrs.opened = details.open;\n      });\n      wrapper.append(details, button);\n      return {\n        dom: wrapper,\n        contentDOM: details\n      };\n    };\n  },\n  addCommands() {\n    return {\n      setDetails: () => ({\n        commands,\n        state\n      }) => {\n        const content = tuiGetSelectedContent(state);\n        return commands.insertContent(`<details data-opened=\"true\"><summary><p></p></summary><div data-type=\"details-content\"><p>${content}</p></div></details><p></p>`);\n      },\n      removeDetails: () => ({\n        state,\n        dispatch\n      }) => tuiDeleteNode(state, dispatch, this.name)\n    };\n  }\n});\nconst TuiDetailsContent = Node.create({\n  name: `detailsContent`,\n  content: `block+`,\n  group: `block`,\n  allowGapCursor: true,\n  parseHTML() {\n    return [{\n      tag: `div[data-type=\"details-content\"]`\n    }];\n  },\n  renderHTML({\n    HTMLAttributes\n  }) {\n    return [`div`, mergeAttributes(this.options.HTMLAttributes, HTMLAttributes, {\n      'data-type': `details-content`\n    }), 0];\n  }\n});\nconst TuiSummary = Node.create({\n  name: `summary`,\n  addOptions() {\n    return {\n      HTMLAttributes: {}\n    };\n  },\n  content: `paragraph`,\n  group: `block`,\n  parseHTML() {\n    return [{\n      tag: `summary`\n    }];\n  },\n  renderHTML({\n    HTMLAttributes\n  }) {\n    return [`summary`, mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  }\n});\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiDetails, TuiDetailsContent, TuiSummary };\n"],"mappings":"2HAEA,IAAMA,EAAaC,EAAK,OAAO,CAC7B,KAAM,UACN,YAAa,CACX,MAAO,CACL,eAAgB,CAAC,CACnB,CACF,EACA,eAAgB,CACd,MAAO,CACL,OAAQ,CACN,QAAS,GACT,YAAa,GACb,UAAWC,GAAWA,EAAQ,aAAa,aAAa,IAAM,OAC9D,WAAYC,IAAe,CACzB,cAAeA,EAAW,MAC5B,EACF,CACF,CACF,EACA,QAAS,yBACT,MAAO,QACP,eAAgB,GAChB,UAAW,GACX,WAAY,CACV,MAAO,CAAC,CACN,IAAK,SACP,CAAC,CACH,EACA,WAAW,CACT,eAAAC,CACF,EAAG,CACD,MAAO,CAAC,MAAO,CACb,MAAO,8CACT,EAAG,CAAC,UAAWC,EAAgB,KAAK,QAAQ,eAAgBD,CAAc,EAAG,CAAC,EAAG,CAAC,SAAU,CAC1F,MAAO,iBACT,CAAC,CAAC,CACJ,EACA,aAAc,CACZ,MAAO,CAAC,CACN,KAAAE,CACF,IAAM,CACJ,IAAMC,EAAU,SAAS,cAAc,KAAK,EACtCC,EAAU,SAAS,cAAc,SAAS,EAC1CC,EAAS,SAAS,cAAc,QAAQ,EAC9C,OAAAF,EAAQ,UAAY,oBACpBE,EAAO,UAAY,kBACnBD,EAAQ,KAAOF,EAAK,MAAM,OAC1BG,EAAO,iBAAiB,QAAS,IAAM,CACrCD,EAAQ,KAAO,CAACA,EAAQ,KACxBF,EAAK,MAAM,OAASE,EAAQ,IAC9B,CAAC,EACDD,EAAQ,OAAOC,EAASC,CAAM,EACvB,CACL,IAAKF,EACL,WAAYC,CACd,CACF,CACF,EACA,aAAc,CACZ,MAAO,CACL,WAAY,IAAM,CAAC,CACjB,SAAAE,EACA,MAAAC,CACF,IAAM,CACJ,IAAMC,EAAUC,EAAsBF,CAAK,EAC3C,OAAOD,EAAS,cAAc,6FAA6FE,CAAO,6BAA6B,CACjK,EACA,cAAe,IAAM,CAAC,CACpB,MAAAD,EACA,SAAAG,CACF,IAAMC,EAAcJ,EAAOG,EAAU,KAAK,IAAI,CAChD,CACF,CACF,CAAC,EACKE,EAAoBf,EAAK,OAAO,CACpC,KAAM,iBACN,QAAS,SACT,MAAO,QACP,eAAgB,GAChB,WAAY,CACV,MAAO,CAAC,CACN,IAAK,kCACP,CAAC,CACH,EACA,WAAW,CACT,eAAAG,CACF,EAAG,CACD,MAAO,CAAC,MAAOC,EAAgB,KAAK,QAAQ,eAAgBD,EAAgB,CAC1E,YAAa,iBACf,CAAC,EAAG,CAAC,CACP,CACF,CAAC,EACKa,EAAahB,EAAK,OAAO,CAC7B,KAAM,UACN,YAAa,CACX,MAAO,CACL,eAAgB,CAAC,CACnB,CACF,EACA,QAAS,YACT,MAAO,QACP,WAAY,CACV,MAAO,CAAC,CACN,IAAK,SACP,CAAC,CACH,EACA,WAAW,CACT,eAAAG,CACF,EAAG,CACD,MAAO,CAAC,UAAWC,EAAgB,KAAK,QAAQ,eAAgBD,CAAc,EAAG,CAAC,CACpF,CACF,CAAC","names":["TuiDetails","Node","element","attributes","HTMLAttributes","mergeAttributes","node","wrapper","details","button","commands","state","content","tuiGetSelectedContent","dispatch","tuiDeleteNode","TuiDetailsContent","TuiSummary"],"x_google_ignoreList":[0]}