import{a as T,c as g}from"./chunk-GI2A5XT4.js";import"./chunk-L3X6YLWB.js";import{E as s,_a as i}from"./chunk-O35IZNJS.js";var M=i.create({name:"details",addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{opened:{default:!0,keepOnSplit:!1,parseHTML:e=>e.getAttribute("data-opened")==="true",renderHTML:e=>({"data-opened":e.opened})}}},content:"summary detailsContent",group:"block",draggable:!0,allowGapCursor:!0,isolating:!0,parseHTML(){return[{tag:"details"}]},renderHTML({HTMLAttributes:e}){return["div",{class:"t-details-wrapper t-details-wrapper_rendered"},["details",s(this.options.HTMLAttributes,e),0],["button",{class:"t-details-arrow"}]]},addNodeView(){return({node:e,getPos:a})=>{if(globalThis.document){let r=document.createElement("div"),t=document.createElement("details"),n=document.createElement("button"),o=document.createElement("button");r.className="t-details-wrapper",n.className="t-details-arrow",n.type="button",o.className="t-details-delete",o.type="button",t.open=e.attrs.opened;let d=()=>{t.open=!t.open,e.attrs.opened=t.open};return n.addEventListener("click",d),o.addEventListener("click",l=>{var u,c,p,m;n.removeEventListener("click",d);let b=(c=(u=a)===null||u===void 0?void 0:u())!==null&&c!==void 0?c:0;this.editor.chain().focus().setTextSelection((p=a)===null||p===void 0?void 0:p()).run();let v=this.editor.state.selection.$anchor.nodeAfter,h=b+((m=v==null?void 0:v.nodeSize)!==null&&m!==void 0?m:0);this.editor.commands.deleteRange({from:b,to:h}),l.preventDefault()},{capture:!0,once:!0}),r.append(t,n,o),{dom:r,contentDOM:t}}}},addCommands(){return{setDetails:()=>({commands:e,editor:a,state:r})=>{var t,n,o;let d="",l=this.editor.state.selection.$anchor.pos;return globalThis.document&&(d=((o=(n=(t=document.defaultView)===null||t===void 0?void 0:t.window.getSelection())===null||n===void 0?void 0:n.toString().trim().length)!==null&&o!==void 0?o:0)>0?g(r):"",setTimeout(()=>a.chain().focus().setTextSelection(l).run())),e.insertContent(`<details data-opened="true"><summary><p></p></summary><div data-type="details-content"><p>${d}</p></div></details><p></p>`)},removeDetails:()=>({editor:e,state:a,dispatch:r})=>(T(a,r,this.name),e.commands.focus("end"))}}}),f=i.create({name:"detailsContent",content:"block+",group:"block",allowGapCursor:!0,parseHTML(){return[{tag:'div[data-type="details-content"]'}]},renderHTML({HTMLAttributes:e}){return["div",s(this.options.HTMLAttributes,e,{"data-type":"details-content"}),0]}}),w=i.create({name:"summary",addOptions(){return{HTMLAttributes:{}}},content:"paragraph",group:"block",parseHTML(){return[{tag:"summary"}]},renderHTML({HTMLAttributes:e}){return["summary",s(this.options.HTMLAttributes,e),0]}});export{M as TuiDetails,f as TuiDetailsContent,w as TuiSummary};
//# sourceMappingURL=chunk-JPQE53J3.js.map
