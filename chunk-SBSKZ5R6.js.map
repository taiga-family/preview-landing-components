{"version":3,"sources":["node_modules/@taiga-ui/cdk/fesm2015/taiga-ui-cdk-directives-element.js","node_modules/@taiga-ui/cdk/fesm2015/taiga-ui-cdk-directives-resize.js","node_modules/@taiga-ui/cdk/fesm2015/taiga-ui-cdk-directives-resizer.js","node_modules/@tinkoff/tui-editor/fesm2015/tinkoff-tui-editor-extensions-tiptap-node-view.js","node_modules/@tinkoff/tui-editor/fesm2015/tinkoff-tui-editor-components-editor-resizable.js","node_modules/@tiptap/extension-image/dist/index.js","node_modules/@taiga-ui/kit/fesm2015/taiga-ui-kit-directives-data-list-dropdown-manager.js","node_modules/@tinkoff/tui-editor/fesm2015/tinkoff-tui-editor-extensions-image-editor.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { ElementRef, Directive, Inject, NgModule } from '@angular/core';\nlet TuiElementDirective = /*#__PURE__*/(() => {\n  class TuiElementDirective {\n    constructor({\n      nativeElement\n    }) {\n      /**\n       * @note:\n       * Typically, when your constructor is invoked with new,\n       * an object is created, its constructor is assigned to\n       * the invoked constructor and the object is then assigned\n       * to this before executing any operations specified\n       * in your constructor method.\n       *\n       * ERROR TypeError: Class constructor ElementRef cannot be invoked without 'new'\n       * https://github.com/taiga-family/taiga-ui/issues/3072\n       *\n       * This way we can instantiate object creation\n       * without additional prototype chain for possible fix bug.\n       */\n      return new ElementRef(nativeElement);\n    }\n  }\n  TuiElementDirective.ɵfac = function TuiElementDirective_Factory(t) {\n    return new (t || TuiElementDirective)(i0.ɵɵdirectiveInject(ElementRef));\n  };\n  TuiElementDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: TuiElementDirective,\n    selectors: [[\"\", \"tuiElement\", \"\"]],\n    exportAs: [\"elementRef\"]\n  });\n  return TuiElementDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiElementModule = /*#__PURE__*/(() => {\n  class TuiElementModule {}\n  TuiElementModule.ɵfac = function TuiElementModule_Factory(t) {\n    return new (t || TuiElementModule)();\n  };\n  TuiElementModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiElementModule\n  });\n  TuiElementModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n  return TuiElementModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiElementDirective, TuiElementModule };\n","import * as i0 from '@angular/core';\nimport { Directive, Inject, NgModule } from '@angular/core';\nimport { TuiResizeService, TuiDestroyService } from '@taiga-ui/cdk/services';\nimport * as i1 from 'rxjs';\nlet TuiResizeDirective = /*#__PURE__*/(() => {\n  class TuiResizeDirective {\n    constructor(tuiResize) {\n      this.tuiResize = tuiResize;\n    }\n  }\n  TuiResizeDirective.ɵfac = function TuiResizeDirective_Factory(t) {\n    return new (t || TuiResizeDirective)(i0.ɵɵdirectiveInject(TuiResizeService));\n  };\n  TuiResizeDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: TuiResizeDirective,\n    selectors: [[\"\", \"tuiResize\", \"\"]],\n    outputs: {\n      tuiResize: \"tuiResize\"\n    },\n    features: [i0.ɵɵProvidersFeature([TuiDestroyService, TuiResizeService])]\n  });\n  return TuiResizeDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * @experimental\n */\nlet TuiResizeModule = /*#__PURE__*/(() => {\n  class TuiResizeModule {}\n  TuiResizeModule.ɵfac = function TuiResizeModule_Factory(t) {\n    return new (t || TuiResizeModule)();\n  };\n  TuiResizeModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiResizeModule\n  });\n  TuiResizeModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n  return TuiResizeModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiResizeDirective, TuiResizeModule };\n","import * as i0 from '@angular/core';\nimport { Directive, EventEmitter, Inject, Input, Output, HostBinding, HostListener, NgModule } from '@angular/core';\nimport { TuiElementDirective } from '@taiga-ui/cdk/directives/element';\nimport { tuiPx } from '@taiga-ui/cdk/utils/format';\nlet TuiResizeableDirective = /*#__PURE__*/(() => {\n  class TuiResizeableDirective extends TuiElementDirective {}\n  TuiResizeableDirective.ɵfac = /* @__PURE__ */(() => {\n    let ɵTuiResizeableDirective_BaseFactory;\n    return function TuiResizeableDirective_Factory(t) {\n      return (ɵTuiResizeableDirective_BaseFactory || (ɵTuiResizeableDirective_BaseFactory = i0.ɵɵgetInheritedFactory(TuiResizeableDirective)))(t || TuiResizeableDirective);\n    };\n  })();\n  TuiResizeableDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: TuiResizeableDirective,\n    selectors: [[\"\", \"tuiResizeable\", \"\"]],\n    features: [i0.ɵɵInheritDefinitionFeature]\n  });\n  return TuiResizeableDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// TODO: Migrate to PointerEvent in 4.0\nlet TuiResizerDirective = /*#__PURE__*/(() => {\n  class TuiResizerDirective {\n    constructor(resizeable) {\n      this.resizeable = resizeable;\n      this.tuiResizer = [0, 0];\n      this.tuiSizeChange = new EventEmitter();\n      this.x = NaN;\n      this.y = NaN;\n      this.width = 0;\n      this.height = 0;\n    }\n    get cursor() {\n      if (!this.tuiResizer[0]) {\n        return 'ns-resize';\n      }\n      if (!this.tuiResizer[1]) {\n        return 'ew-resize';\n      }\n      if (this.tuiResizer[0] * this.tuiResizer[1] > 0) {\n        return 'nwse-resize';\n      }\n      return 'nesw-resize';\n    }\n    onTouchStart({\n      touches\n    }) {\n      this.onMouseDown(touches[0].clientX, touches[0].clientY);\n    }\n    onMouseDown(x, y) {\n      this.x = x;\n      this.y = y;\n      this.width = this.resizeable.nativeElement.clientWidth;\n      this.height = this.resizeable.nativeElement.clientHeight;\n    }\n    onMouseMove({\n      x,\n      y,\n      buttons\n    }) {\n      if (!buttons) {\n        this.onMouseUp();\n      } else {\n        this.onMove(x, y);\n      }\n    }\n    onTouchMove({\n      touches\n    }) {\n      this.onMove(touches[0].clientX, touches[0].clientY);\n    }\n    onMouseUp() {\n      this.x = NaN;\n    }\n    onMove(x, y) {\n      if (Number.isNaN(this.x)) {\n        return;\n      }\n      const {\n        style\n      } = this.resizeable.nativeElement;\n      const size = [this.width + this.tuiResizer[0] * (x - this.x), this.height + this.tuiResizer[1] * (y - this.y)];\n      if (this.tuiResizer[0]) {\n        style.width = tuiPx(size[0]);\n      }\n      if (this.tuiResizer[1]) {\n        style.height = tuiPx(size[1]);\n      }\n      this.tuiSizeChange.emit(size);\n    }\n  }\n  TuiResizerDirective.ɵfac = function TuiResizerDirective_Factory(t) {\n    return new (t || TuiResizerDirective)(i0.ɵɵdirectiveInject(TuiResizeableDirective));\n  };\n  TuiResizerDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: TuiResizerDirective,\n    selectors: [[\"\", \"tuiResizer\", \"\"]],\n    hostVars: 4,\n    hostBindings: function TuiResizerDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"touchstart.silent.passive\", function TuiResizerDirective_touchstart_silent_passive_HostBindingHandler($event) {\n          return ctx.onTouchStart($event);\n        })(\"mousedown.silent.prevent\", function TuiResizerDirective_mousedown_silent_prevent_HostBindingHandler($event) {\n          return ctx.onMouseDown($event.x, $event.y);\n        })(\"mousemove.silent\", function TuiResizerDirective_mousemove_silent_HostBindingHandler($event) {\n          return ctx.onMouseMove($event);\n        }, false, i0.ɵɵresolveDocument)(\"touchmove.silent\", function TuiResizerDirective_touchmove_silent_HostBindingHandler($event) {\n          return ctx.onTouchMove($event);\n        }, false, i0.ɵɵresolveDocument)(\"mouseup.silent\", function TuiResizerDirective_mouseup_silent_HostBindingHandler() {\n          return ctx.onMouseUp();\n        }, false, i0.ɵɵresolveDocument)(\"touchend.silent\", function TuiResizerDirective_touchend_silent_HostBindingHandler() {\n          return ctx.onMouseUp();\n        }, false, i0.ɵɵresolveDocument);\n      }\n      if (rf & 2) {\n        i0.ɵɵstyleProp(\"touch-action\", \"none\")(\"cursor\", ctx.cursor);\n      }\n    },\n    inputs: {\n      tuiResizer: \"tuiResizer\"\n    },\n    outputs: {\n      tuiSizeChange: \"tuiSizeChange\"\n    }\n  });\n  return TuiResizerDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiResizerModule = /*#__PURE__*/(() => {\n  class TuiResizerModule {}\n  TuiResizerModule.ɵfac = function TuiResizerModule_Factory(t) {\n    return new (t || TuiResizerModule)();\n  };\n  TuiResizerModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiResizerModule\n  });\n  TuiResizerModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n  return TuiResizerModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiResizeableDirective, TuiResizerDirective, TuiResizerModule };\n","import { ApplicationRef, ComponentFactoryResolver, ElementRef } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { NodeView } from '@tiptap/core';\n\n/**\n * Copied from\n * {@link https://github.com/sibiraj-s/ngx-tiptap/blob/master/projects/ngx-tiptap/src/lib/AngularRenderer.ts ngx-tiptap}\n */\nclass TuiComponentRenderer {\n  constructor(component, injector, props) {\n    const applicationRef = injector.get(ApplicationRef);\n    const componentFactoryResolver = injector.get(ComponentFactoryResolver);\n    const factory = componentFactoryResolver.resolveComponentFactory(component);\n    this.componentRef = factory.create(injector, []);\n    // set input props to the component\n    this.updateProps(props);\n    // Attach to the view so that the change detector knows to run\n    applicationRef.attachView(this.componentRef.hostView);\n  }\n  get instance() {\n    return this.componentRef.instance;\n  }\n  get el() {\n    return this.componentRef.injector.get(ElementRef);\n  }\n  get dom() {\n    return this.el.nativeElement;\n  }\n  updateProps(props) {\n    Object.entries(props).forEach(([key, value]) => {\n      this.instance[key] = value;\n    });\n  }\n  detectChanges() {\n    this.componentRef.changeDetectorRef.detectChanges();\n  }\n  destroy() {\n    this.componentRef.destroy();\n  }\n}\n\n/**\n * You should extend this class to create custom\n * Tiptap's {@link https://tiptap.dev/guide/node-views NodeView} from angular component.\n * It contains compulsory properties which component will get externally while NodeView's rendering.\n */\nclass TuiNodeViewNgComponent {}\n/**\n * Tiptap editor proposes concept of interactive {@link https://tiptap.dev/guide/node-views NodeViews}.\n * It gives you opportunity to create custom complex Node inside editor. And it will look like native Tiptap's Node.\n * Regard it like angular component inside editor.\n *\n * This solution is adaptation of official React implementation of NodeViews.\n * It was copied from\n * {@link https://github.com/sibiraj-s/ngx-tiptap/blob/master/projects/ngx-tiptap/src/lib/NodeViewRenderer.ts ngx-tiptap}\n */\nclass TuiNodeView extends NodeView {\n  constructor() {\n    super(...arguments);\n    this.contentDOMElement = null;\n  }\n  mount() {\n    const injector = this.options.injector;\n    const doc = injector.get(DOCUMENT);\n    const props = {\n      editor: this.editor,\n      node: this.node,\n      decorations: this.decorations,\n      selected: false,\n      extension: this.extension,\n      getPos: () => this.getPos(),\n      updateAttributes: (attributes = {}) => this.updateAttributes(attributes),\n      deleteNode: () => this.deleteNode()\n    };\n    this.editor.on(`selectionUpdate`, this.handleSelectionUpdate.bind(this));\n    // create renderer\n    this.renderer = new TuiComponentRenderer(this.component, injector, props);\n    // Register drag handler\n    if (this.extension.config.draggable) {\n      this.renderer.el.nativeElement.ondragstart = e => {\n        this.onDragStart(e);\n      };\n    }\n    this.contentDOMElement = this.node.isLeaf ? null : doc.createElement(this.node.isInline ? `span` : `div`);\n    if (this.contentDOMElement) {\n      // For some reason the whiteSpace prop is not inherited properly in Chrome and Safari\n      // With this fix it seems to work fine\n      // See: https://github.com/ueberdosis/tiptap/issues/1197\n      this.contentDOMElement.style.whiteSpace = `inherit`;\n      this.renderer.detectChanges();\n    }\n    this.appendContendDom();\n  }\n  get dom() {\n    return this.renderer.dom;\n  }\n  get contentDOM() {\n    if (this.node.isLeaf) {\n      return null;\n    }\n    return this.contentDOMElement;\n  }\n  update(node, decorations) {\n    if (this.options.update) {\n      return this.options.update(node, decorations);\n    }\n    if (node.type !== this.node.type) {\n      return false;\n    }\n    if (node === this.node && this.decorations === decorations) {\n      return true;\n    }\n    this.node = node;\n    this.decorations = decorations;\n    this.renderer.updateProps({\n      node,\n      decorations\n    });\n    this.appendContendDom();\n    return true;\n  }\n  handleSelectionUpdate() {\n    const {\n      from,\n      to\n    } = this.editor.state.selection;\n    if (from <= this.getPos() && to >= this.getPos() + this.node.nodeSize) {\n      this.selectNode();\n    } else {\n      this.deselectNode();\n    }\n  }\n  selectNode() {\n    this.renderer.updateProps({\n      selected: true\n    });\n  }\n  deselectNode() {\n    this.renderer.updateProps({\n      selected: false\n    });\n  }\n  destroy() {\n    this.renderer.destroy();\n    this.editor.off(`selectionUpdate`, this.handleSelectionUpdate.bind(this));\n    this.contentDOMElement = null;\n  }\n  appendContendDom() {\n    const contentElement = this.dom.querySelector(`[data-node-view-content]`);\n    if (this.contentDOMElement && contentElement && !contentElement.contains(this.contentDOMElement)) {\n      contentElement.appendChild(this.contentDOMElement);\n    }\n  }\n}\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiComponentRenderer, TuiNodeView, TuiNodeViewNgComponent };\n","import * as i0 from '@angular/core';\nimport { Directive, EventEmitter, Component, ChangeDetectionStrategy, ViewChild, Input, Output, HostBinding, NgModule } from '@angular/core';\nimport { TuiNodeViewNgComponent } from '@tinkoff/tui-editor/extensions/tiptap-node-view';\nimport * as i1 from '@taiga-ui/cdk';\nimport { tuiIsNumber, tuiPx, TuiResizeModule, TuiResizerModule } from '@taiga-ui/cdk';\nimport * as i2 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nconst _c0 = [\"container\"];\nconst _c1 = [\"*\"];\nconst _c2 = a0 => [a0, 0];\nconst _c3 = () => [1, 0];\nconst _c4 = () => [0, 1];\nfunction TuiEditorResizableComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵlistener(\"tuiSizeChange\", function TuiEditorResizableComponent_div_4_Template_div_tuiSizeChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.sizeChange.emit($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"tuiResizer\", i0.ɵɵpureFunction0(1, _c4));\n  }\n}\nlet AbstractTuiEditorResizable = /*#__PURE__*/(() => {\n  class AbstractTuiEditorResizable extends TuiNodeViewNgComponent {\n    constructor() {\n      super(...arguments);\n      this.currentHeight = 0;\n      this.currentWidth = 0;\n    }\n    get attrs() {\n      var _a;\n      return ((_a = this.node) === null || _a === void 0 ? void 0 : _a.attrs) || {\n        src: ``\n      };\n    }\n    get width() {\n      return this.currentWidth || this.attrs.width || null;\n    }\n    get height() {\n      return this.currentHeight || this.attrs.height || null;\n    }\n  }\n  AbstractTuiEditorResizable.ɵfac = /* @__PURE__ */(() => {\n    let ɵAbstractTuiEditorResizable_BaseFactory;\n    return function AbstractTuiEditorResizable_Factory(t) {\n      return (ɵAbstractTuiEditorResizable_BaseFactory || (ɵAbstractTuiEditorResizable_BaseFactory = i0.ɵɵgetInheritedFactory(AbstractTuiEditorResizable)))(t || AbstractTuiEditorResizable);\n    };\n  })();\n  AbstractTuiEditorResizable.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: AbstractTuiEditorResizable,\n    features: [i0.ɵɵInheritDefinitionFeature]\n  });\n  return AbstractTuiEditorResizable;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiEditorResizableComponent = /*#__PURE__*/(() => {\n  class TuiEditorResizableComponent {\n    constructor() {\n      this.autoHeight = false;\n      this.width = null;\n      this.height = null;\n      this.sizeChange = new EventEmitter();\n    }\n    get hostWidth() {\n      return tuiIsNumber(this.width) ? tuiPx(this.width) : this.width;\n    }\n    get hostHeight() {\n      if (this.autoHeight) {\n        return null;\n      }\n      return tuiIsNumber(this.height) ? tuiPx(this.height) : this.height;\n    }\n  }\n  TuiEditorResizableComponent.ɵfac = function TuiEditorResizableComponent_Factory(t) {\n    return new (t || TuiEditorResizableComponent)();\n  };\n  TuiEditorResizableComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiEditorResizableComponent,\n    selectors: [[\"tui-editor-resizable\"]],\n    viewQuery: function TuiEditorResizableComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.container = _t.first);\n      }\n    },\n    hostVars: 4,\n    hostBindings: function TuiEditorResizableComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵstyleProp(\"width\", ctx.hostWidth)(\"height\", ctx.hostHeight);\n      }\n    },\n    inputs: {\n      autoHeight: \"autoHeight\",\n      width: \"width\",\n      height: \"height\"\n    },\n    outputs: {\n      sizeChange: \"sizeChange\"\n    },\n    ngContentSelectors: _c1,\n    decls: 6,\n    vars: 8,\n    consts: [[\"container\", \"\"], [\"tuiResizeable\", \"\", 1, \"t-resizable\"], [1, \"t-handle\", \"t-handle-left-side\", 3, \"tuiSizeChange\", \"tuiResizer\"], [\"class\", \"t-handle t-handle-bottom-side\", 3, \"tuiResizer\", \"tuiSizeChange\", 4, \"ngIf\"], [1, \"t-handle\", \"t-handle-right-side\", 3, \"tuiSizeChange\", \"tuiResizer\"], [1, \"t-handle\", \"t-handle-bottom-side\", 3, \"tuiSizeChange\", \"tuiResizer\"]],\n    template: function TuiEditorResizableComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵprojectionDef();\n        i0.ɵɵelementStart(0, \"div\", 1, 0);\n        i0.ɵɵprojection(2);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵlistener(\"tuiSizeChange\", function TuiEditorResizableComponent_Template_div_tuiSizeChange_3_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.sizeChange.emit($event));\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, TuiEditorResizableComponent_div_4_Template, 1, 2, \"div\", 3);\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵlistener(\"tuiSizeChange\", function TuiEditorResizableComponent_Template_div_tuiSizeChange_5_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.sizeChange.emit($event));\n        });\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"t-resizable-auto-height\", ctx.autoHeight);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"tuiResizer\", i0.ɵɵpureFunction1(5, _c2, -1));\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", !ctx.autoHeight);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"tuiResizer\", i0.ɵɵpureFunction0(7, _c3));\n      }\n    },\n    dependencies: [i1.TuiResizeableDirective, i1.TuiResizerDirective, i2.NgIf],\n    styles: [\"[_nghost-%COMP%]{position:relative;display:inline-block;box-sizing:border-box}[_nghost-%COMP%]   .t-resizable[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]   .t-resizable-auto-height[_ngcontent-%COMP%]{height:auto!important}[_nghost-%COMP%]   iframe[_ngcontent-%COMP%]{display:inline;pointer-events:none}[_nghost-%COMP%]:hover   .t-handle[_ngcontent-%COMP%]:after{opacity:1}.t-handle[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;width:.75rem;cursor:col-resize;justify-content:center;align-items:center;height:100%}.t-handle[_ngcontent-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:\\\"\\\";width:50%;height:33%;box-sizing:border-box;border-radius:var(--tui-radius-m);background:var(--tui-base-08);border:1px solid var(--tui-base-03);opacity:0}.t-handle-left-side[_ngcontent-%COMP%]{left:0}.t-handle-bottom-side[_ngcontent-%COMP%]{top:unset;bottom:.3125rem;height:.95rem;width:100%}.t-handle-right-side[_ngcontent-%COMP%]{right:0}\"],\n    changeDetection: 0\n  });\n  return TuiEditorResizableComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiEditorResizableModule = /*#__PURE__*/(() => {\n  class TuiEditorResizableModule {}\n  TuiEditorResizableModule.ɵfac = function TuiEditorResizableModule_Factory(t) {\n    return new (t || TuiEditorResizableModule)();\n  };\n  TuiEditorResizableModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiEditorResizableModule\n  });\n  TuiEditorResizableModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, TuiResizeModule, TuiResizerModule]]\n  });\n  return TuiEditorResizableModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AbstractTuiEditorResizable, TuiEditorResizableComponent, TuiEditorResizableModule };\n","import { Node, mergeAttributes, nodeInputRule } from '@tiptap/core';\nconst inputRegex = /(?:^|\\s)(!\\[(.+|:?)]\\((\\S+)(?:(?:\\s+)[\"'](\\S+)[\"'])?\\))$/;\nconst Image = Node.create({\n  name: 'image',\n  addOptions() {\n    return {\n      inline: false,\n      allowBase64: false,\n      HTMLAttributes: {}\n    };\n  },\n  inline() {\n    return this.options.inline;\n  },\n  group() {\n    return this.options.inline ? 'inline' : 'block';\n  },\n  draggable: true,\n  addAttributes() {\n    return {\n      src: {\n        default: null\n      },\n      alt: {\n        default: null\n      },\n      title: {\n        default: null\n      }\n    };\n  },\n  parseHTML() {\n    return [{\n      tag: this.options.allowBase64 ? 'img[src]' : 'img[src]:not([src^=\"data:\"])'\n    }];\n  },\n  renderHTML({\n    HTMLAttributes\n  }) {\n    return ['img', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)];\n  },\n  addCommands() {\n    return {\n      setImage: options => ({\n        commands\n      }) => {\n        return commands.insertContent({\n          type: this.name,\n          attrs: options\n        });\n      }\n    };\n  },\n  addInputRules() {\n    return [nodeInputRule({\n      find: inputRegex,\n      type: this.type,\n      getAttributes: match => {\n        const [,, alt, src, title] = match;\n        return {\n          src,\n          alt,\n          title\n        };\n      }\n    })];\n  }\n});\nexport { Image, Image as default, inputRegex };\n","import { __decorate } from 'tslib';\nimport * as i0 from '@angular/core';\nimport { ElementRef, Directive, Self, Inject, ContentChildren, NgModule } from '@angular/core';\nimport * as i1 from '@taiga-ui/cdk';\nimport { EMPTY_QUERY, tuiTypedFromEvent, tuiQueryListChanges, tuiPreventDefault, tuiGetClosestFocusable, TuiDestroyService, tuiPure } from '@taiga-ui/cdk';\nimport { TuiDropdownDirective } from '@taiga-ui/core';\nimport { merge, EMPTY } from 'rxjs';\nimport { takeUntil, switchMap, take, filter, tap, map, shareReplay, debounceTime } from 'rxjs/operators';\nlet TuiDataListDropdownManagerDirective = /*#__PURE__*/(() => {\n  class TuiDataListDropdownManagerDirective {\n    constructor(destroy$) {\n      this.destroy$ = destroy$;\n      this.dropdowns = EMPTY_QUERY;\n      this.els = EMPTY_QUERY;\n    }\n    ngAfterViewInit() {\n      this.right$.pipe(takeUntil(this.destroy$)).subscribe(index => {\n        this.tryToFocus(index);\n      });\n      merge(this.immediate$, this.debounce$).pipe(switchMap(active => {\n        this.dropdowns.forEach((dropdown, index) => {\n          dropdown.toggle(index === active);\n        });\n        const element = this.els.get(active);\n        const dropdown = this.dropdowns.get(active);\n        if (!element || !(dropdown === null || dropdown === void 0 ? void 0 : dropdown.dropdownBoxRef)) {\n          return EMPTY;\n        }\n        const {\n          nativeElement\n        } = dropdown.dropdownBoxRef.location;\n        const mouseEnter$ = tuiTypedFromEvent(nativeElement, 'mouseenter').pipe(take(1));\n        const esc$ = merge(tuiTypedFromEvent(element.nativeElement, 'keydown'), tuiTypedFromEvent(nativeElement, 'keydown')).pipe(filter(({\n          key\n        }) => key === 'Escape'));\n        return merge(mouseEnter$, esc$).pipe(tap(event => {\n          if (dropdown.dropdownBoxRef) {\n            event.stopPropagation();\n          }\n          element.nativeElement.focus();\n          dropdown.toggle('offsetX' in event);\n        }));\n      }), takeUntil(this.destroy$)).subscribe();\n    }\n    get elements$() {\n      return tuiQueryListChanges(this.els).pipe(map(array => array.map(({\n        nativeElement\n      }) => nativeElement)), shareReplay({\n        bufferSize: 1,\n        refCount: true\n      }));\n    }\n    get right$() {\n      return this.elements$.pipe(switchMap(elements => merge(...elements.map((element, index) => tuiTypedFromEvent(element, 'keydown').pipe(filter(({\n        key\n      }) => key === 'ArrowRight'), tuiPreventDefault(), map(() => index))))));\n    }\n    get immediate$() {\n      return this.elements$.pipe(switchMap(elements => merge(...elements.map((element, index) => tuiTypedFromEvent(element, 'click').pipe(map(() => index))))));\n    }\n    get debounce$() {\n      return this.elements$.pipe(switchMap(elements => merge(...elements.map((element, index) => merge(tuiTypedFromEvent(element, 'focus'), tuiTypedFromEvent(element, 'blur')).pipe(filter(({\n        relatedTarget\n      }) => this.notInDropdown(relatedTarget, index)), map(({\n        type\n      }) => type === 'focus' ? index : NaN))))), debounceTime(300));\n    }\n    notInDropdown(element, index) {\n      var _a, _b;\n      return !((_b = (_a = this.dropdowns.get(index)) === null || _a === void 0 ? void 0 : _a.dropdownBoxRef) === null || _b === void 0 ? void 0 : _b.location.nativeElement.contains(element));\n    }\n    tryToFocus(index) {\n      var _a, _b;\n      const content = (_b = (_a = this.dropdowns.get(index)) === null || _a === void 0 ? void 0 : _a.dropdownBoxRef) === null || _b === void 0 ? void 0 : _b.location.nativeElement;\n      if (!content) {\n        return;\n      }\n      // First item is focus trap\n      const focusTrap = tuiGetClosestFocusable({\n        initial: content,\n        root: content\n      });\n      const item = tuiGetClosestFocusable({\n        initial: focusTrap || content,\n        root: content\n      });\n      if (item) {\n        item.focus();\n      }\n    }\n  }\n  TuiDataListDropdownManagerDirective.ɵfac = function TuiDataListDropdownManagerDirective_Factory(t) {\n    return new (t || TuiDataListDropdownManagerDirective)(i0.ɵɵdirectiveInject(TuiDestroyService, 2));\n  };\n  TuiDataListDropdownManagerDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: TuiDataListDropdownManagerDirective,\n    selectors: [[\"tui-data-list\", \"tuiDataListDropdownManager\", \"\"]],\n    contentQueries: function TuiDataListDropdownManagerDirective_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        i0.ɵɵcontentQuery(dirIndex, TuiDropdownDirective, 5);\n        i0.ɵɵcontentQuery(dirIndex, TuiDropdownDirective, 5, ElementRef);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dropdowns = _t);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.els = _t);\n      }\n    },\n    features: [i0.ɵɵProvidersFeature([TuiDestroyService])]\n  });\n  __decorate([tuiPure], TuiDataListDropdownManagerDirective.prototype, \"elements$\", null);\n  __decorate([tuiPure], TuiDataListDropdownManagerDirective.prototype, \"right$\", null);\n  __decorate([tuiPure], TuiDataListDropdownManagerDirective.prototype, \"immediate$\", null);\n  __decorate([tuiPure], TuiDataListDropdownManagerDirective.prototype, \"debounce$\", null);\n  return TuiDataListDropdownManagerDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiDataListDropdownManagerModule = /*#__PURE__*/(() => {\n  class TuiDataListDropdownManagerModule {}\n  TuiDataListDropdownManagerModule.ɵfac = function TuiDataListDropdownManagerModule_Factory(t) {\n    return new (t || TuiDataListDropdownManagerModule)();\n  };\n  TuiDataListDropdownManagerModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiDataListDropdownManagerModule\n  });\n  TuiDataListDropdownManagerModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n  return TuiDataListDropdownManagerModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TuiDataListDropdownManagerDirective, TuiDataListDropdownManagerModule };\n","import { __decorate } from 'tslib';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, EventEmitter, Component, ChangeDetectionStrategy, Inject, Input, Output, ElementRef, Directive, Self, HostBinding, ViewChild, HostListener, NgModule } from '@angular/core';\nimport * as i5 from '@angular/platform-browser';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { WINDOW } from '@ng-web-apis/common';\nimport * as i6 from '@taiga-ui/cdk';\nimport { tuiPure, TuiDestroyService, tuiIsPresent, TuiActiveZoneModule } from '@taiga-ui/cdk';\nimport * as i2 from '@tinkoff/tui-editor/components/editor-resizable';\nimport { AbstractTuiEditorResizable, TuiEditorResizableModule } from '@tinkoff/tui-editor/components/editor-resizable';\nimport { TUI_EDITOR_RESIZE_EVENT } from '@tinkoff/tui-editor/constants';\nimport { TUI_EDITOR_OPTIONS, TUI_IMAGE_LOADER } from '@tinkoff/tui-editor/tokens';\nimport { timer } from 'rxjs';\nimport { takeUntil, take, takeWhile } from 'rxjs/operators';\nimport * as i1 from '@taiga-ui/core';\nimport { TuiPositionAccessor, tuiAsPositionAccessor, TuiButtonModule, TuiHostedDropdownModule, TuiDropdownModule, TuiDataListModule } from '@taiga-ui/core';\nimport { TuiNodeView } from '@tinkoff/tui-editor/extensions/tiptap-node-view';\nimport { Image } from '@tiptap/extension-image';\nimport { Plugin } from '@tiptap/pm/state';\nimport { TuiDataListDropdownManagerModule } from '@taiga-ui/kit';\n\n/**\n * Min size of resizable image inside editor\n * @deprecated use {@link TUI_IMAGE_EDITOR_OPTIONS} instead\n * TODO: remove in v4.0\n */\nconst _c0 = [\"resizable\"];\nfunction TuiImageEditorComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tui-image-align\", 6);\n    i0.ɵɵlistener(\"updateAlignStyles\", function TuiImageEditorComponent_ng_template_5_Template_tui_image_align_updateAlignStyles_0_listener($event) {\n      const close_r3 = i0.ɵɵrestoreView(_r2).close;\n      const ctx_r3 = i0.ɵɵnextContext();\n      ctx_r3.align($event);\n      return i0.ɵɵresetView(close_r3());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵstyleMap(ctx_r3.style);\n  }\n}\nconst TUI_EDITOR_MIN_IMAGE_WIDTH = new InjectionToken(`[TUI_EDITOR_MIN_IMAGE_WIDTH]`, {\n  factory: () => null\n});\n/**\n * Max size of resizable image inside editor\n * @deprecated use {@link TUI_IMAGE_EDITOR_OPTIONS} instead\n * TODO: remove in v4.0\n */\nconst TUI_EDITOR_MAX_IMAGE_WIDTH = new InjectionToken(`[TUI_EDITOR_MAX_IMAGE_WIDTH]`, {\n  factory: () => null\n});\n/**\n * Size of resizable image inside editor\n */\nconst TUI_IMAGE_EDITOR_OPTIONS = new InjectionToken(`[TUI_IMAGE_EDITOR_OPTIONS]`, {\n  factory: () => ({\n    minWidth: null,\n    maxWidth: Infinity\n  })\n});\nlet TuiImageAlignComponent = /*#__PURE__*/(() => {\n  class TuiImageAlignComponent {\n    constructor(options) {\n      this.options = options;\n      this.style = null;\n      this.updateAlignStyles = new EventEmitter();\n    }\n    isAlignCenter(style) {\n      var _a, _b;\n      return (_b = (_a = style === null || style === void 0 ? void 0 : style.replace(/\\s/g, '')) === null || _a === void 0 ? void 0 : _a.includes('justify-content:center')) !== null && _b !== void 0 ? _b : false;\n    }\n    isAlignJustify(style) {\n      return style === null || style === undefined || style === '';\n    }\n    isAlignLeft(style) {\n      var _a, _b;\n      return (_b = (_a = style === null || style === void 0 ? void 0 : style.replace(/\\s/g, '')) === null || _a === void 0 ? void 0 : _a.includes('float:left')) !== null && _b !== void 0 ? _b : false;\n    }\n    isAlignRight(style) {\n      var _a, _b;\n      return (_b = (_a = style === null || style === void 0 ? void 0 : style.replace(/\\s/g, '')) === null || _a === void 0 ? void 0 : _a.includes('float:right')) !== null && _b !== void 0 ? _b : false;\n    }\n    alignLeft() {\n      this.updateAlignStyles.emit('float: left');\n    }\n    alignCenter() {\n      this.updateAlignStyles.emit('display: flex; justify-content: center; margin-left: auto; margin-right: auto;');\n    }\n    alignJustify() {\n      this.updateAlignStyles.emit(null);\n    }\n    alignRight() {\n      this.updateAlignStyles.emit('float: right');\n    }\n  }\n  TuiImageAlignComponent.ɵfac = function TuiImageAlignComponent_Factory(t) {\n    return new (t || TuiImageAlignComponent)(i0.ɵɵdirectiveInject(TUI_EDITOR_OPTIONS));\n  };\n  TuiImageAlignComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiImageAlignComponent,\n    selectors: [[\"tui-image-align\"]],\n    inputs: {\n      style: \"style\"\n    },\n    outputs: {\n      updateAlignStyles: \"updateAlignStyles\"\n    },\n    decls: 5,\n    vars: 8,\n    consts: [[1, \"t-align-list\"], [\"size\", \"s\", \"tuiIconButton\", \"\", 3, \"click.capture\", \"appearance\", \"icon\"], [\"appearance\", \"icon\", \"size\", \"s\", \"tuiIconButton\", \"\", 3, \"click.capture\", \"appearance\", \"icon\"]],\n    template: function TuiImageAlignComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n        i0.ɵɵlistener(\"click.capture\", function TuiImageAlignComponent_Template_button_click_capture_1_listener() {\n          return ctx.alignJustify();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"button\", 1);\n        i0.ɵɵlistener(\"click.capture\", function TuiImageAlignComponent_Template_button_click_capture_2_listener() {\n          return ctx.alignLeft();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"button\", 1);\n        i0.ɵɵlistener(\"click.capture\", function TuiImageAlignComponent_Template_button_click_capture_3_listener() {\n          return ctx.alignCenter();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"button\", 2);\n        i0.ɵɵlistener(\"click.capture\", function TuiImageAlignComponent_Template_button_click_capture_4_listener() {\n          return ctx.alignRight();\n        });\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"appearance\", ctx.isAlignJustify(ctx.style) ? \"flat\" : \"icon\")(\"icon\", ctx.options.icons.imageExtension.alignJustify);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"appearance\", ctx.isAlignLeft(ctx.style) ? \"flat\" : \"icon\")(\"icon\", ctx.options.icons.imageExtension.alignLeft);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"appearance\", ctx.isAlignCenter(ctx.style) ? \"flat\" : \"icon\")(\"icon\", ctx.options.icons.imageExtension.alignCenter);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"appearance\", ctx.isAlignRight(ctx.style) ? \"flat\" : \"icon\")(\"icon\", ctx.options.icons.imageExtension.alignRight);\n      }\n    },\n    dependencies: [i1.TuiButtonComponent],\n    styles: [\".t-align-list[_ngcontent-%COMP%]{display:flex;grid-gap:.3125rem;gap:.3125rem;padding:.125rem}\"],\n    changeDetection: 0\n  });\n  __decorate([tuiPure], TuiImageAlignComponent.prototype, \"isAlignCenter\", null);\n  __decorate([tuiPure], TuiImageAlignComponent.prototype, \"isAlignJustify\", null);\n  __decorate([tuiPure], TuiImageAlignComponent.prototype, \"isAlignLeft\", null);\n  __decorate([tuiPure], TuiImageAlignComponent.prototype, \"isAlignRight\", null);\n  return TuiImageAlignComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiImageOptionsPositionDirective = /*#__PURE__*/(() => {\n  class TuiImageOptionsPositionDirective extends TuiPositionAccessor {\n    constructor(el) {\n      super();\n      this.el = el;\n      this.type = 'dropdown';\n    }\n    getPosition({\n      width,\n      height\n    }) {\n      const {\n        right,\n        top\n      } = this.el.nativeElement.getBoundingClientRect();\n      return [top + height + 5, right - width / 2];\n    }\n  }\n  TuiImageOptionsPositionDirective.ɵfac = function TuiImageOptionsPositionDirective_Factory(t) {\n    return new (t || TuiImageOptionsPositionDirective)(i0.ɵɵdirectiveInject(ElementRef));\n  };\n  TuiImageOptionsPositionDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: TuiImageOptionsPositionDirective,\n    selectors: [[\"\", \"tuiImageOptionsPosition\", \"\"]],\n    features: [i0.ɵɵProvidersFeature([tuiAsPositionAccessor(TuiImageOptionsPositionDirective)]), i0.ɵɵInheritDefinitionFeature]\n  });\n  return TuiImageOptionsPositionDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet TuiImageEditorComponent = /*#__PURE__*/(() => {\n  class TuiImageEditorComponent extends AbstractTuiEditorResizable {\n    constructor(legacyMinWidth, legacyMaxWidth, imageOptions, options, doc, sanitizer, el, destroy$, win) {\n      super();\n      this.legacyMinWidth = legacyMinWidth;\n      this.legacyMaxWidth = legacyMaxWidth;\n      this.imageOptions = imageOptions;\n      this.options = options;\n      this.doc = doc;\n      this.sanitizer = sanitizer;\n      this.el = el;\n      this.destroy$ = destroy$;\n      this.win = win;\n      this.contenteditable = false;\n      this.style = null;\n      this.focused = false;\n      this.open = false;\n    }\n    get dragHandle() {\n      var _a;\n      return (_a = this.attrs.draggable) !== null && _a !== void 0 ? _a : null;\n    }\n    get height() {\n      return null;\n    }\n    get alt() {\n      return this.attrs.alt || '';\n    }\n    get title() {\n      return this.attrs.title || '';\n    }\n    getSrc(src) {\n      return this.sanitizer.bypassSecurityTrustResourceUrl(src !== null && src !== void 0 ? src : '');\n    }\n    currentTargetIsFocused(node) {\n      this.focused = this.el.nativeElement.contains(node);\n      if (this.focused) {\n        this.selectFakeText();\n      } else {\n        this.open = false;\n      }\n    }\n    get minWidth() {\n      var _a;\n      return ((_a = this.legacyMinWidth) !== null && _a !== void 0 ? _a : this.imageOptions.minWidth) || 0;\n    }\n    get maxWidth() {\n      var _a;\n      return ((_a = this.legacyMaxWidth) !== null && _a !== void 0 ? _a : this.imageOptions.maxWidth) || 0;\n    }\n    ngOnInit() {\n      this.style = this.attrs.style;\n    }\n    ngAfterViewInit() {\n      if (this.minWidth > 0) {\n        this.updateMinWidth();\n      }\n    }\n    align(styles) {\n      this.style = styles;\n      this.attrs.style = styles;\n      this.notifyUpdate();\n    }\n    updateSize([width]) {\n      this.currentWidth = Math.max(this.minWidth, Math.min(this.maxWidth, width));\n      this.attrs.width = this.currentWidth;\n      this.notifyUpdate();\n    }\n    updateMinWidth() {\n      timer(0).pipe(takeUntil(this.destroy$)).subscribe(() => {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const naturalWidth = (_g = (_f = (_d = (_c = (_b = (_a = this.resizable) === null || _a === void 0 ? void 0 : _a.container) === null || _b === void 0 ? void 0 : _b.nativeElement.querySelector('img')) === null || _c === void 0 ? void 0 : _c.naturalWidth) !== null && _d !== void 0 ? _d : (_e = this.resizable) === null || _e === void 0 ? void 0 : _e.width) !== null && _f !== void 0 ? _f : this.attrs.width) !== null && _g !== void 0 ? _g : 0;\n        if (this.minWidth > 0 && this.minWidth > naturalWidth) {\n          this.updateSize([this.minWidth]);\n        }\n      });\n    }\n    notifyUpdate() {\n      this.el.nativeElement.dispatchEvent(new CustomEvent(TUI_EDITOR_RESIZE_EVENT, {\n        bubbles: true\n      }));\n    }\n    selectFakeText() {\n      var _a, _b, _c;\n      const range = this.doc.createRange();\n      (_a = this.el.nativeElement.querySelector('p')) === null || _a === void 0 ? void 0 : _a.focus();\n      range.selectNode(this.el.nativeElement);\n      (_b = this.win.getSelection()) === null || _b === void 0 ? void 0 : _b.removeAllRanges();\n      (_c = this.win.getSelection()) === null || _c === void 0 ? void 0 : _c.addRange(range);\n    }\n  }\n  TuiImageEditorComponent.ɵfac = function TuiImageEditorComponent_Factory(t) {\n    return new (t || TuiImageEditorComponent)(i0.ɵɵdirectiveInject(TUI_EDITOR_MIN_IMAGE_WIDTH), i0.ɵɵdirectiveInject(TUI_EDITOR_MAX_IMAGE_WIDTH), i0.ɵɵdirectiveInject(TUI_IMAGE_EDITOR_OPTIONS), i0.ɵɵdirectiveInject(TUI_EDITOR_OPTIONS), i0.ɵɵdirectiveInject(DOCUMENT), i0.ɵɵdirectiveInject(DomSanitizer), i0.ɵɵdirectiveInject(ElementRef), i0.ɵɵdirectiveInject(TuiDestroyService, 2), i0.ɵɵdirectiveInject(WINDOW));\n  };\n  TuiImageEditorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: TuiImageEditorComponent,\n    selectors: [[\"tui-image-editor\"]],\n    viewQuery: function TuiImageEditorComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.resizable = _t.first);\n      }\n    },\n    hostVars: 4,\n    hostBindings: function TuiImageEditorComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"click.silent\", function TuiImageEditorComponent_click_silent_HostBindingHandler($event) {\n          return ctx.currentTargetIsFocused($event.target);\n        }, false, i0.ɵɵresolveDocument);\n      }\n      if (rf & 2) {\n        i0.ɵɵattribute(\"contenteditable\", ctx.contenteditable)(\"data-drag-handle\", ctx.dragHandle);\n        i0.ɵɵstyleMap(ctx.style);\n      }\n    },\n    features: [i0.ɵɵProvidersFeature([TuiDestroyService]), i0.ɵɵInheritDefinitionFeature],\n    decls: 7,\n    vars: 17,\n    consts: [[\"resizable\", \"\"], [\"imgOptions\", \"\"], [\"tuiImageOptionsPosition\", \"\", 1, \"t-hosted\", 3, \"openChange\", \"content\", \"open\"], [\"appearance\", \"outline\", \"size\", \"s\", \"tuiIconButton\", \"\", 1, \"t-image-options\", 3, \"icon\"], [3, \"sizeChange\", \"autoHeight\", \"width\"], [\"contenteditable\", \"false\", 3, \"alt\", \"src\", \"title\"], [3, \"updateAlignStyles\"]],\n    template: function TuiImageEditorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"tui-hosted-dropdown\", 2);\n        i0.ɵɵtwoWayListener(\"openChange\", function TuiImageEditorComponent_Template_tui_hosted_dropdown_openChange_0_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          i0.ɵɵtwoWayBindingSet(ctx.open, $event) || (ctx.open = $event);\n          return i0.ɵɵresetView($event);\n        });\n        i0.ɵɵelement(1, \"button\", 3);\n        i0.ɵɵelementStart(2, \"tui-editor-resizable\", 4, 0);\n        i0.ɵɵlistener(\"sizeChange\", function TuiImageEditorComponent_Template_tui_editor_resizable_sizeChange_2_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.updateSize($event));\n        });\n        i0.ɵɵelement(4, \"img\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(5, TuiImageEditorComponent_ng_template_5_Template, 1, 2, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        const imgOptions_r5 = i0.ɵɵreference(6);\n        i0.ɵɵproperty(\"content\", imgOptions_r5);\n        i0.ɵɵtwoWayProperty(\"open\", ctx.open);\n        i0.ɵɵadvance();\n        i0.ɵɵclassProp(\"_open\", ctx.open);\n        i0.ɵɵproperty(\"icon\", ctx.options.icons.imageExtension.settings);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"autoHeight\", true)(\"width\", ctx.width);\n        i0.ɵɵadvance(2);\n        i0.ɵɵstyleProp(\"max-width\", ctx.maxWidth, \"px\")(\"min-width\", ctx.minWidth, \"px\");\n        i0.ɵɵclassProp(\"ProseMirror-selectednode\", ctx.focused);\n        i0.ɵɵproperty(\"alt\", ctx.alt)(\"src\", ctx.getSrc(ctx.attrs.src), i0.ɵɵsanitizeUrl)(\"title\", ctx.title);\n        i0.ɵɵattribute(\"width\", ctx.width);\n      }\n    },\n    dependencies: [i1.TuiHostedDropdownComponent, i1.TuiButtonComponent, i2.TuiEditorResizableComponent, TuiImageAlignComponent, TuiImageOptionsPositionDirective],\n    styles: [\"[_nghost-%COMP%]{display:inline-block}[data-drag-handle][_nghost-%COMP%]{cursor:move}[_nghost-%COMP%]:hover   .t-image-options[_ngcontent-%COMP%]{opacity:1}img[_ngcontent-%COMP%]{pointer-events:none}.t-emulate-inline-node[_ngcontent-%COMP%]{display:inline-block;margin:0;height:0}.t-hosted[_ngcontent-%COMP%]{position:relative}.t-image-options[_ngcontent-%COMP%]{position:absolute;top:.625rem;right:.625rem;z-index:1;background:var(--tui-base-01)}.t-image-options[_ngcontent-%COMP%]:not(._open){transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:0}\"],\n    changeDetection: 0\n  });\n  __decorate([tuiPure], TuiImageEditorComponent.prototype, \"getSrc\", null);\n  return TuiImageEditorComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nfunction pasteImage(injector) {\n  return (view, event) => {\n    var _a;\n    const dataTransfer = event instanceof DragEvent ? event.dataTransfer : event.clipboardData;\n    const imagesFiles = Array.from((_a = dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.files) !== null && _a !== void 0 ? _a : []).filter(file => /image/i.test(file.type));\n    if (imagesFiles.length) {\n      event.preventDefault();\n    }\n    const loader = injector.get(TUI_IMAGE_LOADER);\n    imagesFiles.forEach(file => {\n      loader(file).pipe(take(1),\n      // eslint-disable-next-line rxjs/no-ignored-takewhile-value\n      takeWhile(() => !view.isDestroyed)).subscribe(src => {\n        const node = view.state.schema.nodes.image.create({\n          src\n        });\n        const transaction = view.state.tr.replaceSelectionWith(node);\n        setTimeout === null || setTimeout === void 0 ? void 0 : setTimeout(() => {\n          if (!view.isDestroyed) {\n            view.dispatch(transaction);\n          }\n        });\n      });\n    });\n  };\n}\nfunction tuiCreateImageEditorExtension({\n  injector,\n  draggable\n}) {\n  return createImageEditorExtension(injector, {\n    draggable\n  });\n}\n/**\n * @deprecated: use {@link tuiCreateImageEditorExtension}\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction createImageEditorExtension(injector, {\n  draggable\n} = {}) {\n  const enableDraggable = tuiIsPresent(draggable) ? draggable : true;\n  return Image.extend({\n    name: `image`,\n    group: `inline`,\n    inline: true,\n    priority: 0,\n    selectable: true,\n    draggable: enableDraggable,\n    parseHTML() {\n      return [{\n        tag: `img`\n      }];\n    },\n    addAttributes() {\n      return {\n        src: {\n          default: ``,\n          keepOnSplit: false\n        },\n        width: {\n          default: null,\n          keepOnSplit: false\n        },\n        alt: {\n          default: ``,\n          keepOnSplit: false\n        },\n        style: {\n          default: ``,\n          keepOnSplit: false\n        },\n        title: {\n          default: ``,\n          keepOnSplit: false\n        },\n        draggable: {\n          default: enableDraggable ? `` : null,\n          keepOnSplit: false\n        }\n      };\n    },\n    addNodeView() {\n      return props => Reflect.construct(TuiNodeView, [TuiImageEditorComponent, props, Object.assign({\n        injector\n      }, props)]);\n    },\n    addCommands() {\n      return {\n        setEditableImage: attrs => ({\n          commands\n        }) => commands.insertContent({\n          type: this.name,\n          attrs\n        })\n      };\n    },\n    addProseMirrorPlugins() {\n      return [new Plugin({\n        props: {\n          handleDOMEvents: {\n            paste: pasteImage(injector),\n            drop: pasteImage(injector)\n          }\n        }\n      })];\n    }\n  });\n}\nlet TuiImageEditorModule = /*#__PURE__*/(() => {\n  class TuiImageEditorModule {}\n  TuiImageEditorModule.ɵfac = function TuiImageEditorModule_Factory(t) {\n    return new (t || TuiImageEditorModule)();\n  };\n  TuiImageEditorModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: TuiImageEditorModule\n  });\n  TuiImageEditorModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[CommonModule, TuiEditorResizableModule, TuiButtonModule, TuiHostedDropdownModule, TuiDataListDropdownManagerModule, TuiActiveZoneModule, TuiDropdownModule, TuiDataListModule]]\n  });\n  return TuiImageEditorModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { TUI_EDITOR_MAX_IMAGE_WIDTH, TUI_EDITOR_MIN_IMAGE_WIDTH, TUI_IMAGE_EDITOR_OPTIONS, TuiImageAlignComponent, TuiImageEditorComponent, TuiImageEditorModule, TuiImageOptionsPositionDirective, createImageEditorExtension, tuiCreateImageEditorExtension };\n"],"mappings":"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","names":["TuiElementDirective","nativeElement","ElementRef","t","ɵɵdirectiveInject","ɵɵdefineDirective","TuiResizeModule","t","ɵɵdefineNgModule","ɵɵdefineInjector","TuiResizeableDirective","TuiElementDirective","ɵTuiResizeableDirective_BaseFactory","t","ɵɵgetInheritedFactory","ɵɵdefineDirective","ɵɵInheritDefinitionFeature","TuiResizerDirective","resizeable","EventEmitter","touches","x","y","buttons","style","size","tuiPx","ɵɵdirectiveInject","rf","ctx","ɵɵlistener","$event","ɵɵresolveDocument","ɵɵstyleProp","TuiResizerModule","ɵɵdefineNgModule","ɵɵdefineInjector","TuiComponentRenderer","component","injector","props","applicationRef","ApplicationRef","factory","ComponentFactoryResolver$1","ElementRef","key","value","TuiNodeViewNgComponent","TuiNodeView","NodeView","doc","DOCUMENT","attributes","e","node","decorations","from","to","contentElement","_c0","_c1","_c2","a0","_c3","_c4","TuiEditorResizableComponent_div_4_Template","rf","ctx","_r2","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","$event","ɵɵrestoreView","ctx_r2","ɵɵnextContext","ɵɵresetView","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","AbstractTuiEditorResizable","TuiNodeViewNgComponent","_a","ɵAbstractTuiEditorResizable_BaseFactory","t","ɵɵgetInheritedFactory","ɵɵdefineDirective","ɵɵInheritDefinitionFeature","TuiEditorResizableComponent","EventEmitter","tuiIsNumber","tuiPx","ɵɵdefineComponent","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","ɵɵstyleProp","_r1","ɵɵprojectionDef","ɵɵprojection","ɵɵtemplate","ɵɵclassProp","ɵɵadvance","ɵɵpureFunction1","TuiResizeableDirective","TuiResizerDirective","NgIf","TuiEditorResizableModule","ɵɵdefineNgModule","ɵɵdefineInjector","CommonModule","TuiResizeModule","TuiResizerModule","inputRegex","Image","Node","HTMLAttributes","mergeAttributes","options","commands","nodeInputRule","match","alt","src","title","TuiDataListDropdownManagerModule","t","ɵɵdefineNgModule","ɵɵdefineInjector","_c0","TuiImageEditorComponent_ng_template_5_Template","rf","ctx","_r2","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","$event","close_r3","ɵɵrestoreView","ɵɵnextContext","ɵɵresetView","ɵɵelementEnd","ctx_r3","ɵɵstyleMap","TUI_EDITOR_MIN_IMAGE_WIDTH","InjectionToken","TUI_EDITOR_MAX_IMAGE_WIDTH","TUI_IMAGE_EDITOR_OPTIONS","TuiImageAlignComponent","options","EventEmitter","style","_a","_b","t","ɵɵdirectiveInject","TUI_EDITOR_OPTIONS","ɵɵdefineComponent","ɵɵadvance","ɵɵproperty","TuiButtonComponent","__decorate","tuiPure","TuiImageOptionsPositionDirective","TuiPositionAccessor","el","width","height","right","top","ElementRef","ɵɵdefineDirective","ɵɵProvidersFeature","tuiAsPositionAccessor","ɵɵInheritDefinitionFeature","TuiImageEditorComponent","AbstractTuiEditorResizable","legacyMinWidth","legacyMaxWidth","imageOptions","doc","sanitizer","destroy$","win","src","node","styles","timer","takeUntil","_c","_d","_e","_f","_g","naturalWidth","TUI_EDITOR_RESIZE_EVENT","range","DOCUMENT","DomSanitizer","TuiDestroyService","WINDOW","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","ɵɵresolveDocument","ɵɵattribute","_r1","ɵɵtwoWayListener","ɵɵtwoWayBindingSet","ɵɵelement","ɵɵtemplate","ɵɵtemplateRefExtractor","imgOptions_r5","ɵɵreference","ɵɵtwoWayProperty","ɵɵclassProp","ɵɵstyleProp","ɵɵsanitizeUrl","TuiHostedDropdownComponent","TuiEditorResizableComponent","pasteImage","injector","view","event","dataTransfer","imagesFiles","file","loader","TUI_IMAGE_LOADER","take","takeWhile","transaction","tuiCreateImageEditorExtension","draggable","createImageEditorExtension","enableDraggable","tuiIsPresent","Image","props","TuiNodeView","attrs","commands","Plugin","TuiImageEditorModule","ɵɵdefineNgModule","ɵɵdefineInjector","CommonModule","TuiEditorResizableModule","TuiButtonModule","TuiHostedDropdownModule","TuiDataListDropdownManagerModule","TuiActiveZoneModule","TuiDropdownModule","TuiDataListModule"],"x_google_ignoreList":[0,1,2,3,4,5,6,7]}